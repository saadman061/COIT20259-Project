<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">

  <ui:define name="title">List of Orders</ui:define>

  <ui:define name="heading">
    <h2 style="background-color:#4a607a; color:#fff; padding:6px;">List of Orders</h2>
  </ui:define>

  <ui:define name="content">
    <h:messages globalOnly="true" />

    <h:dataTable value="#{orderBean.allOrders}" var="o" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;">
      
      <h:column>
        <f:facet name="header">
          <div style="background-color:#DCDCDC; color:black; font-weight:bold; padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">Order #</div>
        </f:facet>
        <div style="padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">#{o.id}</div>
      </h:column>
      
      <h:column>
  <f:facet name="header">
    <div style="background-color:#DCDCDC; color:black; font-weight:bold; padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">Customer</div>
  </f:facet>
  <div style="padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">
    <h:form>
      <h:commandLink value="#{o.customer.name}" action="#{customerBean.viewCustomer(o.customer)}"
                      style="color:blue; text-decoration:underline;" />
    </h:form>
  </div>
</h:column>

      
      <h:column>
        <f:facet name="header">
          <div style="background-color:#DCDCDC; color:black; font-weight:bold; padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">Device</div>
        </f:facet>
        <div style="padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">#{o.productModel}</div>
      </h:column>
      
      <h:column>
        <f:facet name="header">
          <div style="background-color:#DCDCDC; color:black; font-weight:bold; padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">Action</div>
        </f:facet>
        <div style="padding:4px; border:1px solid #DCDCDC; white-space: nowrap;">
          <h:form>
            <h:commandLink value="Delete" action="#{orderBean.deleteOrder(o)}"
                            onclick="return confirm('Are you sure you want to delete this order?');"
                            style="color:blue; text-decoration:underline;" />
          </h:form>
        </div>
      </h:column>
    </h:dataTable>

    <br />
    <h:outputText value="Total orders: #{fn:length(orderBean.allOrders)}" />

    <hr />
    <h:link value="Create a New Order" outcome="createOrder.xhtml" />
    |
    <h:link value="Main Page" outcome="dashboard.xhtml" />
  </ui:define>

</ui:composition>
